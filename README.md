# –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —Ä–µ–ª–∏–∑–æ–≤ `release_tool`

## üöÄ –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

**release_tool** ‚Äî —ç—Ç–æ –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —Ä–µ–ª–∏–∑–æ–≤ –¥–ª—è UV workspace –ø—Ä–æ–µ–∫—Ç–æ–≤ —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –ø–∞–∫–µ—Ç–∞–º–∏. –û–Ω –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç –¥–æ–ª–≥–∏–π —Ä—É—á–Ω–æ–π –ø—Ä–æ—Ü–µ—Å—Å —Ä–µ–ª–∏–∑–∞ –≤ *—à–µ—Å—Ç–∏—Å—Ç—É–ø–µ–Ω—á–∞—Ç—É—é* (Stage 1‚Üí6) –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—É—é –ø—Ä–æ—Ü–µ–¥—É—Ä—É —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π LLM –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö commit- –∏ tag-—Å–æ–æ–±—â–µ–Ω–∏–π.

### ‚ú® –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

- **üéØ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è**: –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–µ—Ç –≤–µ—Å—å —Ü–∏–∫–ª —Ä–µ–ª–∏–∑–∞ –æ—Ç –ø–æ–∏—Å–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π –¥–æ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ —Ç–µ–≥–æ–≤
- **üß† LLM-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ò–ò –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Å–º—ã—Å–ª–µ–Ω–Ω—ã—Ö commit –∏ tag —Å–æ–æ–±—â–µ–Ω–∏–π
- **üì¶ UV Workspace –ø–æ–¥–¥–µ—Ä–∂–∫–∞**: –°–ø–µ—Ü–∏–∞–ª—å–Ω–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å UV workspace —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π
- **üîÑ 6-—ç—Ç–∞–ø–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å**: –ß—ë—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ —à–∞–≥–∏ ‚Äî –æ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –¥–æ –Ω–æ–≤–æ–≥–æ dev-—Ü–∏–∫–ª–∞
- **‚ö° –≠–∫–æ–Ω–æ–º–∏—è –≤—Ä–µ–º–µ–Ω–∏**: –°–æ–∫—Ä–∞—â–∞–µ—Ç –≤—Ä–µ–º—è —Ä–µ–ª–∏–∑–∞ –¥–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–æ–º–∞–Ω–¥
- **üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: Dry-run —Ä–µ–∂–∏–º –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π + –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- **üîß –ì–∏–±–∫–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**: –ï–¥–∏–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª —Å —É–º–Ω—ã–º –ø–æ–∏—Å–∫–æ–º –Ω–∞—Å—Ç—Ä–æ–µ–∫
- **üìä C–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–µ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏—è–º–∏ (patch/minor/major/dev)
- **üîó Git Submodule**: –õ–µ–≥–∫–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø—Ä–æ–µ–∫—Ç—ã —á–µ—Ä–µ–∑ submodule
- **üìù –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: –ò—Å—á–µ—Ä–ø—ã–≤–∞—é—â–∏–µ –ª–æ–≥–∏ –∏ –ø–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö

### üéØ –ß—Ç–æ –¥–µ–ª–∞–µ—Ç –ø—Ä–æ–µ–∫—Ç

1. **–û–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è** –≤ –ø–∞–∫–µ—Ç–∞—Ö workspace
2. **–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—ã–µ –æ—Ç—á–µ—Ç—ã** –æ –Ω–µ–∑–∞–∫–æ–º–º–∏—á–µ–Ω–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö –∏ –∫–æ–º–º–∏—Ç–∞—Ö
3. **–ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å LLM** –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
4. **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–µ—Ç git-–æ–ø–µ—Ä–∞—Ü–∏–∏** (commit, tag, push)
5. **–£–ø—Ä–∞–≤–ª—è–µ—Ç –≤–µ—Ä—Å–∏—è–º–∏** —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
6. **–û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∫–æ–Ω—Ç—Ä–æ–ª—å** —á–µ—Ä–µ–∑ dry-run —Ä–µ–∂–∏–º –∏ –ø–æ—ç—Ç–∞–ø–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ


> –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä Python-—Å–∫—Ä–∏–ø—Ç–æ–≤, —É–ø—Ä–æ—â–∞—é—â–∏—Ö —Ä–µ–ª–∏–∑ –ø–∞–∫–µ—Ç–æ–≤ –≤–Ω—É—Ç—Ä–∏ **UV workspace**-–ø—Ä–æ–µ–∫—Ç–∞.
>
> –†–∞–±–æ—Ç–∞–µ—Ç –≤ *—à–µ—Å—Ç—å —ç—Ç–∞–ø–æ–≤* (Stage 1 ‚Üí ‚Ä¶ ‚Üí Stage 6) –∏ –æ–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–º —Ñ–∞–π–ª–æ–º `release_tool.toml`.

---
## 1. –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
```bash
# 1Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–µ–∑–∞–∫–æ–º–º–∏—á–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
uv run python -m release_tool.stage1          # —Å–æ–∑–¥–∞—ë—Ç *changes_uncommitted.txt*

# 2Ô∏è‚É£ –û—Ç–¥–∞—ë–º —Ñ–∞–π–ª—ã LLM ‚Üí –∑–∞–ø–æ–ª–Ω—è–µ–º *commit_message.txt*
uv run python -m release_tool.stage2 --commit --push   # –∫–æ–º–º–∏—Ç–∏–º (–∏ –ø—É—à–∏–º) –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

# 3Ô∏è‚É£ –°–æ–±–∏—Ä–∞–µ–º diff –ø–æ—Å–ª–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Ç–µ–≥–∞
uv run python -m release_tool.stage3          # —Å–æ–∑–¥–∞—ë—Ç *changes_since_tag.txt*

# 4Ô∏è‚É£ –û—Ç–¥–∞—ë–º –≤ LLM ‚Üí –∑–∞–ø–æ–ª–Ω—è–µ–º *tag_message.txt*, –∑–∞—Ç–µ–º *prepare*-–∫–æ–º–º–∏—Ç
uv run python -m release_tool.stage4 --bump patch --push   # bump + commit –≤ dev_branch

# 5Ô∏è‚É£ –û—Ç–∫—Ä—ã–≤–∞–µ–º Pull-Request dev_branch ‚Üí main, —Ä–µ–≤—å—é –∏ merge (–≤—ã—Ö–æ–¥–∏—Ç –∑–∞ —Ä–∞–º–∫–∏ —Å–∫—Ä–∏–ø—Ç–æ–≤)

# 6Ô∏è‚É£ –ü–æ—Å–ª–µ merge –≤—ã–ø–æ–ª–Ω—è–µ–º –≤—Ä—É—á–Ω—É—é —Ä–µ–ª–∏–∑-—à–∞–≥–∏:
uv run python -m release_tool.stage5 --push       # —Ç–µ–≥
uv run python -m release_tool.stage6 --push       # –Ω–æ–≤—ã–π dev-—Ü–∏–∫–ª
```

**–û—á–∏—Å—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤ –∏–∑–º–µ–Ω–µ–Ω–∏–π:**
```bash
uv run python -m release_tool.clear           # –æ—á–∏—â–∞–µ—Ç release_tool/changes
```

`--dry-run` –∏–ª–∏ `dry_run=true` –≤ –∫–æ–Ω—Ñ–∏–≥–µ –≤—ã–≤–æ–¥–∏—Ç —à–∞–≥–∏ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è ‚Äî —É–¥–æ–±–Ω–æ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏.

---
## 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤ –ø—Ä–æ–µ–∫—Ç—ã

### –î–ª—è –Ω–æ–≤—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤
```bash
# –î–æ–±–∞–≤–ª—è–µ–º release_tool –∫–∞–∫ git submodule
git submodule add https://github.com/VLMHyperBenchTeam/release_tool.git release_tool

# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–æ–≤ —Å submodules
git clone --recursive https://github.com/your-username/your-project.git

# –ò–ª–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è submodules –≤ —É–∂–µ —Å–∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ
git submodule update --init --recursive
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
```
your-project/
‚îú‚îÄ‚îÄ release_tool/           # ‚Üê Git submodule
‚îÇ   ‚îú‚îÄ‚îÄ stage1.py
‚îÇ   ‚îú‚îÄ‚îÄ stage2.py  
‚îÇ   ‚îú‚îÄ‚îÄ stage3.py
‚îÇ   ‚îú‚îÄ‚îÄ stage4.py
‚îÇ   ‚îú‚îÄ‚îÄ config.py
‚îÇ   ‚îú‚îÄ‚îÄ git_utils.py
‚îÇ   ‚îú‚îÄ‚îÄ release_tool.toml   # ‚Üê –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ packages/               # ‚Üê –í–∞—à–∏ –ø–∞–∫–µ—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ package1/
‚îÇ   ‚îî‚îÄ‚îÄ package2/
‚îî‚îÄ‚îÄ .gitmodules            # ‚Üê –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è submodules
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ release_tool
```bash
# –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –ø–∞–ø–∫—É submodule –∏ –æ–±–Ω–æ–≤–ª—è–µ–º
cd release_tool
git pull origin main

# –í–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –≤ –æ—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ–µ–∫—Ç –∏ —Ñ–∏–∫—Å–∏—Ä—É–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
cd ..
git add release_tool
git commit -m "update: –æ–±–Ω–æ–≤–∏—Ç—å release_tool –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏"
git push
```

**–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:**
–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ª—é–±–æ–π –∫–æ–º–∞–Ω–¥—ã –≤ –≤—ã–≤–æ–¥–µ —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è, –∫–∞–∫–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:
```
[stage1] –ü–æ–∏—Å–∫ –Ω–µ–∑–∞–∫–æ–º–º–∏—á–µ–Ω–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –ø–∞–∫–µ—Ç–∞—Ö...
[stage1] –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è: release_tool.toml          # ‚Üê –∫–æ—Ä–Ω–µ–≤–∞—è (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
[stage1] –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è: release_tool/release_tool.toml  # ‚Üê –∏–∑ submodule
```

---
## 3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```
pip install packaging
```
*(–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–∞–∫–µ—Ç `packaging`; –æ—Å—Ç–∞–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏ ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞)*

---
## 4. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è `release_tool.toml`

### –£–º–Ω—ã–π –ø–æ–∏—Å–∫ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
`release_tool` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—â–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤ —Å–ª–µ–¥—É—é—â–µ–º –ø–æ—Ä—è–¥–∫–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞:

1. **`release_tool.toml` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞** ‚Äî –¥–ª—è –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏–∏ –ø–æ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø—Ä–æ–µ–∫—Ç
2. **`release_tool/release_tool.toml` –≤ submodule** ‚Äî –¥–µ—Ñ–æ–ª—Ç–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
3. **–í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** ‚Äî –µ—Å–ª–∏ —Ñ–∞–π–ª—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —ç—Ç–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞:**
- ‚úÖ **–ì–∏–±–∫–æ—Å—Ç—å**: –º–æ–∂–Ω–æ –∫–∞—Å—Ç–æ–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
- ‚úÖ **–ü—Ä–æ—Å—Ç–æ—Ç–∞**: —Ä–∞–±–æ—Ç–∞–µ—Ç "–∏–∑ –∫–æ—Ä–æ–±–∫–∏" –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- ‚úÖ **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: —Å—Ç–∞—Ä—ã–µ –ø—Ä–æ–µ–∫—Ç—ã –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
- ‚úÖ **–ü–µ—Ä–µ–Ω–æ—Å–∏–º–æ—Å—Ç—å**: submodule —Å–æ–¥–µ—Ä–∂–∏—Ç —Ä–∞–±–æ—á—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

### –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
```toml
[tool.release_tool]
# –ö–∞—Ç–∞–ª–æ–≥, –≤ –∫–æ—Ç–æ—Ä–æ–º –ª–µ–∂–∞—Ç –ø–æ–¥–ø–∞–∫–µ—Ç—ã (Git-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏)
packages_dir = "packages"

# –§–∞–π–ª—ã —Å –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏
changes_uncommitted_filename = "changes_uncommitted.txt"
changes_since_tag_filename   = "changes_since_tag.txt"

# –ö–∞—Ç–∞–ª–æ–≥, –∫—É–¥–∞ —Å–∫–ª–∞–¥—ã–≤–∞—é—Ç—Å—è —Ñ–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω–∏–π
changes_output_dir = "release_tool/changes"

# –ü—É—Ç—å –∫ prod/pyproject.toml –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç–µ–≥–æ–≤ —Ä–µ–ª–∏–∑–æ–≤
prod_pyproject_path = "prod/pyproject.toml"

# –§–∞–π–ª—ã —Å —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ LLM
commit_message_filename = "commit_message.txt"
tag_message_filename    = "tag_message.txt"

# –ü—Ä–µ—Ñ–∏–∫—Å —Ç–µ–≥–∞ (–∏—Ç–æ–≥–æ–≤—ã–π —Ç–µ–≥ = "<tag_prefix><version>")
tag_prefix = "v"

# –ò–º—è —É–¥–∞–ª—ë–Ω–Ω–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è (git push <remote>)
git_remote = "origin"

# "–°—É—Ö–æ–π" —Ä–µ–∂–∏–º: —Ç–æ–ª—å–∫–æ –≤—ã–≤–æ–¥ —à–∞–≥–æ–≤, –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
# (–º–æ–∂–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∏–∑ CLI –∫–ª—é—á–æ–º --dry-run)
dry_run = false
```

### –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞
–ß—Ç–æ–±—ã –∏–∑–º–µ–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞, —Å–æ–∑–¥–∞–π—Ç–µ `release_tool.toml` –≤ –∫–æ—Ä–Ω–µ:

```bash
# –ö–æ–ø–∏—Ä—É–µ–º –¥–µ—Ñ–æ–ª—Ç–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
cp release_tool/release_tool.toml .

# –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º –ø–æ–¥ —Å–≤–æ–∏ –Ω—É–∂–¥—ã
# –ù–∞–ø—Ä–∏–º–µ—Ä, –º–µ–Ω—è–µ–º packages_dir = "my_packages"
```

---
## 5. –≠—Ç–∞–ø—ã —Ä–∞–±–æ—Ç—ã
### 5.1 Stage 1 ‚Äî ¬´Uncommitted¬ª
`uv run python -m release_tool.stage1 [--dry-run]`

1. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç `git status --porcelain`.
2. –ï—Å–ª–∏ –µ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è ‚Üí —Ñ–∞–π–ª `<changes_output_dir>/<package>/<changes_uncommitted_filename>` —Å:
   * —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ (`git status --porcelain`)
   * –∫—Ä–∞—Ç–∫–∞—è —Å–≤–æ–¥–∫–∞ (`git diff --stat`)
   * **–ø–æ–ª–Ω—ã–π diff** (`git diff`) ‚Äî –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ—Å—Ç—Ä–æ—á–Ω–æ.

**–°–æ–∑–¥–∞—ë—Ç —Ñ–∞–π–ª—ã:**
- `<changes_output_dir>/<package_name>/<changes_uncommitted_filename>` ‚Äî –∏–∑–º–µ–Ω–µ–Ω–∏—è
- `<changes_output_dir>/<package_name>/<commit_message_filename>` ‚Äî **–ø—É—Å—Ç–æ–π —Ñ–∞–π–ª** –¥–ª—è LLM

*(–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `release_tool/changes/<package_name>/changes_uncommitted.txt` –∏ `release_tool/changes/<package_name>/commit_message.txt`)*

**–ö–æ–≥–¥–∞ –µ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
```
[stage1] –ü–æ–∏—Å–∫ –Ω–µ–∑–∞–∫–æ–º–º–∏—á–µ–Ω–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –ø–∞–∫–µ—Ç–∞—Ö...
[stage1] –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞—Ç–∞–ª–æ–≥: packages
[stage1] –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–∞–∫–µ—Ç: hello_world
[stage1]   ‚úÖ hello_world: –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ release_tool/changes/hello_world/changes_uncommitted.txt
[stage1]   üìù hello_world: —Å–æ–∑–¥–∞–Ω –ø—É—Å—Ç–æ–π —Ñ–∞–π–ª release_tool/changes/hello_world/commit_message.txt
[stage1] ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ. –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ –ø–∞–∫–µ—Ç–æ–≤ —Å –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏: 1
```

**–ö–æ–≥–¥–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–µ—Ç:**
```
[stage1] –ü–æ–∏—Å–∫ –Ω–µ–∑–∞–∫–æ–º–º–∏—á–µ–Ω–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –ø–∞–∫–µ—Ç–∞—Ö...
[stage1] –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞—Ç–∞–ª–æ–≥: packages
[stage1] –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–∞–∫–µ—Ç: hello_world
[stage1]   hello_world: –Ω–µ—Ç –Ω–µ–∑–∞–∫–æ–º–º–∏—á–µ–Ω–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
[stage1] ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏–π –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ ‚Äî —Ñ–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–µ —Å–æ–∑–¥–∞–Ω—ã
```

### 5.2 Stage 2 ‚Äî ¬´Commit¬ª
`uv run python -m release_tool.stage2 [--dry-run] [--commit] [--push]`

–í—ã–ø–æ–ª–Ω—è–µ—Ç –∫–æ–º–º–∏—Ç –∏/–∏–ª–∏ push –∏–∑–º–µ–Ω–µ–Ω–∏–π. –ü–∞—Ä–∞–º–µ—Ç—Ä—ã `--commit` –∏ `--push` –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `--commit` ‚Äî —Å–æ–∑–¥–∞—Ç—å –∫–æ–º–º–∏—Ç –ø–æ –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏—è–º
- `--push` ‚Äî –≤—ã–ø–æ–ª–Ω–∏—Ç—å git push –¥–ª—è –ø–∞–∫–µ—Ç–æ–≤
- –ë–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ `--commit`

**–ß–∏—Ç–∞–µ—Ç —Ñ–∞–π–ª—ã:** `<changes_output_dir>/<package_name>/<commit_message_filename>`  
*(–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `release_tool/changes/<package_name>/commit_message.txt`)*

**–ö–æ–≥–¥–∞ –µ—Å—Ç—å –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è:**
```
[stage2] –í—ã–ø–æ–ª–Ω—è–µ–º –∫–æ–º–º–∏—Ç –∏ push –¥–ª—è –ø–∞–∫–µ—Ç–æ–≤ —Å –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏...
[stage2] –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–∞–∫–µ—Ç: hello_world
[stage2]   ‚úÖ hello_world: commit —Å–æ–∑–¥–∞–Ω –∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω
[stage2] ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ. –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ –ø–∞–∫–µ—Ç–æ–≤: 1
```

**–ü—Ä–∏ push –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å –∫–∞–∂–¥–æ–≥–æ –ø–∞–∫–µ—Ç–∞:**
```
[stage2] –í—ã–ø–æ–ª–Ω—è–µ–º push –¥–ª—è –ø–∞–∫–µ—Ç–æ–≤...
[stage2] –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–∞–∫–µ—Ç: hello_world
[stage2]   ‚úÖ hello_world: –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã
[stage2] –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–∞–∫–µ—Ç: bench_utils
[stage2]   üì≠ bench_utils: –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–µ—Ç
```

### 5.3 Stage 3 ‚Äî ¬´Since Tag¬ª
`uv run python -m release_tool.stage3 [--dry-run] [--tag TAG_NAME]`

–°–æ–±–∏—Ä–∞–µ—Ç **–ø–æ–ª–Ω—ã–π diff** –∏–∑–º–µ–Ω–µ–Ω–∏–π –º–µ–∂–¥—É —Ç–µ–≥–æ–º –∏ HEAD ‚Üí `<changes_output_dir>/<package>/<changes_since_tag_filename>`.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `--tag TAG_NAME` ‚Äî —Å–æ–±—Ä–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ —Ç–µ–≥–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ç–µ–≥)
- `--dry-run` ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å, —á—Ç–æ –±—É–¥–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ, –±–µ–∑ —Å–æ–∑–¥–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤

**–°–æ–∑–¥–∞—ë—Ç —Ñ–∞–π–ª—ã:**
- `<changes_output_dir>/<package_name>/<changes_since_tag_filename>` ‚Äî **—Ç–æ–ª—å–∫–æ diff**
- `<changes_output_dir>/<package_name>/<tag_message_filename>` ‚Äî **–ø—É—Å—Ç–æ–π —Ñ–∞–π–ª** –¥–ª—è LLM

**–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
```bash
# –û—Ç –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Ç–µ–≥–∞
uv run python -m release_tool.stage3

# –û—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–µ–≥–∞
uv run python -m release_tool.stage3 --tag v1.0.0

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑ —Å–æ–∑–¥–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤
uv run python -m release_tool.stage3 --tag v0.5.0 --dry-run
```

### 5.4 Stage 4 ‚Äî ¬´Prepare¬ª (release-commit –±–µ–∑ —Ç–µ–≥–∞)
`uv run python -m release_tool.stage4 --bump patch|minor|major|dev [--push] [--dry-run]`

1. –£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –≤–µ—Ä—Å–∏—é (`--bump ‚Ä¶`) –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç `pyproject.toml`.
2. –ß–∏—Ç–∞–µ—Ç `<tag_message_filename>` –∏ —Å–æ–∑–¥–∞—ë—Ç **–∫–æ–º–º–∏—Ç** —Å —ç—Ç–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º.
3. –ù–µ —Å—Ç–∞–≤–∏—Ç —Ç–µ–≥, –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç dev-—Ü–∏–∫–ª.
4. Optionally `--push` ‚Äî –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–º–º–∏—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ `dev_branch`).

–î–∞–ª–µ–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç Pull Request –∏–∑ `dev_branch` ‚Üí `main` –∏ –ø—Ä–æ—Ö–æ–¥–∏—Ç review.

### 5.5 Stage 5 ‚Äî ¬´Tag¬ª
`uv run python -m release_tool.stage5 [--push] [--dry-run]`

–ò—Å–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ—Å–ª–µ merge PR –≤ `main`:
‚Ä¢ –ù–∞—Ö–æ–¥–∏—Ç –≤–µ—Ä—Å–∏—é –≤ `pyproject.toml`.
‚Ä¢ –°—Ç–∞–≤–∏—Ç –∞–Ω–Ω–æ—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–≥ `v<version>` **–Ω–∞ —ç—Ç–æ–º –∂–µ –∫–æ–º–º–∏—Ç–µ**.
‚Ä¢ –ü—É—à–∏—Ç —Ç–µ–≥ (–µ—Å–ª–∏ `--push` –∏–ª–∏ `cfg.dry_run = false`).

### 5.6 Stage 6 ‚Äî ¬´Next Dev¬ª
`uv run python -m release_tool.stage6 [--branch dev_branch] [--push] [--dry-run]`

1. –°–æ–∑–¥–∞—ë—Ç (–∏–ª–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç) –≤–µ—Ç–∫—É `dev_branch` –æ—Ç `main`.
2. –ú–µ–Ω—è–µ—Ç –≤–µ—Ä—Å–∏—é ‚Üí `patch+1.dev0` –∏ –∫–æ–º–º–∏—Ç–∏—Ç `chore: start ‚Ä¶dev0 development`.
3. –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –ø—É—à–∏—Ç –≤–µ—Ç–∫—É.

---
### –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª (–Ω–æ–≤—ã–π)
```
# 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π
uv run python -m release_tool.stage1
uv run python -m release_tool.stage2 --commit --push

# 2. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ä–µ–ª–∏–∑–∞
uv run python -m release_tool.stage3
uv run python -m release_tool.stage4 --bump patch --push  # –∫–æ–º–º–∏—Ç –≤ dev_branch
# ‚Üí PR dev_branch ‚Üí main, review, merge

# 3. –¢–µ–≥ + –Ω–æ–≤—ã–π dev-—Ü–∏–∫–ª (–≤—Ä—É—á–Ω—É—é)
uv run python -m release_tool.stage5 --push          # —Ç–µ–≥
uv run python -m release_tool.stage6 --push      # –Ω–æ–≤—ã–π dev-—Ü–∏–∫–ª
```

–î–ª—è dry-run –∫–∞–∂–¥–æ–≥–æ —ç—Ç–∞–ø–∞ –¥–æ–±–∞–≤—å—Ç–µ `--dry-run`.

### –¢–æ–ª—å–∫–æ –∫–æ–º–º–∏—Ç—ã (–±–µ–∑ —Ä–µ–ª–∏–∑–∞)
```bash
uv run python -m release_tool.stage1
# –ó–∞–ø–æ–ª–Ω—è–µ–º commit_message.txt
uv run python -m release_tool.stage2 --commit  # —Ç–æ–ª—å–∫–æ –∫–æ–º–º–∏—Ç
```

### –¢–æ–ª—å–∫–æ push (–∫–æ–º–º–∏—Ç—ã —É–∂–µ –µ—Å—Ç—å)
```bash
uv run python -m release_tool.stage2 --push  # —Ç–æ–ª—å–∫–æ –æ—Ç–ø—Ä–∞–≤–∫–∞
```

### –û—á–∏—Å—Ç–∫–∞ —Ä–∞–±–æ—á–∏—Ö —Ñ–∞–π–ª–æ–≤
```bash
# –£–¥–∞–ª—è–µ—Ç –≤—Å–µ —Ñ–∞–π–ª—ã –≤ release_tool/changes
uv run python -m release_tool.clear

# –ü–æ–∫–∞–∑–∞—Ç—å, —á—Ç–æ –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω–æ
uv run python -m release_tool.clear --dry-run
```

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è Stage 4
–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ Stage 4 –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

‚Ä¢ —É–¥–∞–ª—è–µ—Ç —Å—Ç—Ä–æ–∫–∏ `workspace = true` –∏–∑ —Å–µ–∫—Ü–∏–∏ `[tool.uv.sources]` –≤ `pyproject.toml`, —á—Ç–æ–±—ã —Ä–µ–ª–∏–∑-–∫–æ–º–º–∏—Ç —Å—Å—ã–ª–∞–ª—Å—è –Ω–∞ ¬´—á–∏—Å—Ç—É—é¬ª –≤–µ—Ä—Å–∏—é –±–µ–∑ workspace-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π;

‚Ä¢ –æ–±–Ω–æ–≤–ª—è–µ—Ç —Ç–µ–≥ –ø–∞–∫–µ—Ç–∞ –≤ —Ñ–∞–π–ª–µ `prod/pyproject.toml` (–ø—É—Ç—å –∑–∞–¥–∞—ë—Ç—Å—è –∫–ª—é—á–æ–º `prod_pyproject_path` –≤ –∫–æ–Ω—Ñ–∏–≥–µ).

---
## 6. –í–∫–ª—é—á–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ CI
–§–∞–π–ª –ø—Ä–∏–º–µ—Ä–∞ workflow –ª–µ–∂–∏—Ç –≤ `release_tool/ci/release_flow.yml`.

–ß—Ç–æ–±—ã –≤–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ Stage 5/6 –Ω–∞ –∫–∞–∂–¥—ã–π merge –≤ `main`:

```bash
# –ö–æ–ø–∏—Ä—É–µ–º (–∏–ª–∏ –ø–µ—Ä–µ–º–µ—â–∞–µ–º) —Ñ–∞–π–ª –≤ –≤–∞—à –ø—Ä–æ–µ–∫—Ç
mkdir -p .github/workflows
cp release_tool/ci/release_flow.yml .github/workflows/

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤–∞–º –ø–æ–¥—Ö–æ–¥–∏—Ç –∏–º—è –≤–µ—Ç–∫–∏ –∏ –≤–µ—Ä—Å–∏—è Python –≤–Ω—É—Ç—Ä–∏ workflow.
# –ü–æ—Å–ª–µ –∫–æ–º–º–∏—Ç–∞ GitHub –∑–∞–ø—É—Å—Ç–∏—Ç workflow –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º push –≤ main.
```

> ‚ö†Ô∏è –ï—Å–ª–∏ –ø–æ–∑–∂–µ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –≤—Ä–µ–º–µ–Ω–Ω–æ –≤—ã–∫–ª—é—á–∏—Ç—å CI ‚Äî –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –±–ª–æ–∫ `push:` –≤ `.github/workflows/release_flow.yml` –∏–ª–∏ —É–¥–∞–ª–∏—Ç–µ —Ñ–∞–π–ª.

---
## 7. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### 7.1 –û—á–∏—Å—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤ –∏–∑–º–µ–Ω–µ–Ω–∏–π
`uv run python -m release_tool.clear [--dry-run]`

–ü–æ–ª–Ω–æ—Å—Ç—å—é –æ—á–∏—â–∞–µ—Ç –∫–∞—Ç–∞–ª–æ–≥ `changes_output_dir` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `release_tool/changes`).

**–ö–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–µ–ª–∏–∑–∞ –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- –ü—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –º–µ–∂–¥—É —Ä–∞–∑–Ω—ã–º–∏ –≤–µ—Ç–∫–∞–º–∏/–ø—Ä–æ–µ–∫—Ç–∞–º–∏
- –î–ª—è "—á–∏—Å—Ç–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞" –ø—Ä–æ—Ü–µ—Å—Å–∞ —Ä–µ–ª–∏–∑–∞

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:**
```
[clear] ‚úÖ –ö–∞—Ç–∞–ª–æ–≥ release_tool/changes –æ—á–∏—â–µ–Ω
```

**–° --dry-run:**
```
[clear] --dry-run: –±—É–¥–µ—Ç —É–¥–∞–ª—ë–Ω –∫–∞—Ç–∞–ª–æ–≥ release_tool/changes
  release_tool/changes/hello_world/changes_uncommitted.txt
  release_tool/changes/hello_world/commit_message.txt
```

---
## 8. –ê–ª–≥–æ—Ä–∏—Ç–º—ã –∏ –¥–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
‚Ä¢ Git-–æ–ø–µ—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —á–µ—Ä–µ–∑ `subprocess` (—Å–º. `release_tool/git_utils.py`).  
‚Ä¢ –ü—Ä–æ–≤–µ—Ä–∫–∞ ¬´–µ—Å—Ç—å –ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è¬ª ‚Äî `git rev-list <last_tag>..HEAD --count` (>0 ‚Üí –µ—Å—Ç—å).  
‚Ä¢ –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç –≤–µ—Ä—Å–∏–π ‚Äî `packaging.version.Version` + RegExp; –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —É—Ä–æ–≤–Ω–∏ `patch`/`minor`/`major` –∏ `dev`.

---

## 9. –¢–∏–ø–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π (dry-run)
```bash
# –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤—Å–µ —ç—Ç–∞–ø—ã –±–µ–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π
uv run python -m release_tool.stage1 --dry-run
uv run python -m release_tool.stage2 --dry-run
uv run python -m release_tool.stage3 --dry-run
uv run python -m release_tool.stage4 --dry-run --bump patch
```

### –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª commit ‚Üí release
```bash
# 1. –§–∏–∫—Å–∏—Ä—É–µ–º —Ä–∞–±–æ—á–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
uv run python -m release_tool.stage1
# –ó–∞–ø–æ–ª–Ω—è–µ–º commit_message.txt –≤ –∫–∞–∂–¥–æ–º –ø–∞–∫–µ—Ç–µ
uv run python -m release_tool.stage2 --commit --push

# 2. –ì–æ—Ç–æ–≤–∏–º —Ä–µ–ª–∏–∑
uv run python -m release_tool.stage3
# –ó–∞–ø–æ–ª–Ω—è–µ–º tag_message.txt –≤ –∫–∞–∂–¥–æ–º –ø–∞–∫–µ—Ç–µ
uv run python -m release_tool.stage4 --bump patch --push
```

### –¢–æ–ª—å–∫–æ –∫–æ–º–º–∏—Ç—ã (–±–µ–∑ —Ä–µ–ª–∏–∑–∞)
```bash
uv run python -m release_tool.stage1
# –ó–∞–ø–æ–ª–Ω—è–µ–º commit_message.txt
uv run python -m release_tool.stage2 --commit  # —Ç–æ–ª—å–∫–æ –∫–æ–º–º–∏—Ç
```

### –¢–æ–ª—å–∫–æ —Ä–µ–ª–∏–∑ (–ø–æ—Å–ª–µ –∫–æ–º–º–∏—Ç–æ–≤)
```bash
uv run python -m release_tool.stage3
# –ó–∞–ø–æ–ª–Ω—è–µ–º tag_message.txt
uv run python -m release_tool.stage4 --bump minor --push  # bump + push

### –¢–æ–ª—å–∫–æ bump (–±–µ–∑ push)
```bash
# –í–µ—Ä—Å–∏—é –º–æ–∂–Ω–æ —É–≤–µ–ª–∏—á–∏—Ç—å, –Ω–∞—Ö–æ–¥—è—Å—å –æ—Ñ–ª–∞–π–Ω; push —Å–¥–µ–ª–∞–µ–º –ø–æ–∑–∂–µ
uv run python -m release_tool.stage4 --bump patch
```

### –†–∞–∑–Ω—ã–µ —É—Ä–æ–≤–Ω–∏ bump
```bash
# –ü–∞—Ç—á-—Ä–µ–ª–∏–∑ (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è)
uv run python -m release_tool.stage4 --bump patch --push

# –ú–∏–Ω–æ—Ä–Ω—ã–π —Ä–µ–ª–∏–∑ (–Ω–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏)
uv run python -m release_tool.stage4 --bump minor --push

# –ú–∞–∂–æ—Ä–Ω—ã–π —Ä–µ–ª–∏–∑ (breaking changes)
uv run python -m release_tool.stage4 --bump major --push

# Dev-—Ä–µ–ª–∏–∑ (—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)
uv run python -m release_tool.stage4 --bump dev --push
```

---
## 10. –ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã
| –í–æ–ø—Ä–æ—Å | –û—Ç–≤–µ—Ç |
|--------|-------|
| **–ù—É–∂–µ–Ω –ª–∏ –æ—Ç–¥–µ–ª—å–Ω—ã–π –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π env?** | –ù–µ—Ç, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å `packaging`. |
| **–ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–µ–∑ LLM?** | –î–∞ ‚Äî –≤—Ä—É—á–Ω—É—é –∑–∞–ø–æ–ª–Ω–∏—Ç–µ `release_commit_message.txt`. |
| **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç bump –¥–ª—è –æ–±—ã—á–Ω—ã—Ö –≤–µ—Ä—Å–∏–π?** | –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Ç—Ä–∏ —É—Ä–æ–≤–Ω—è: *patch*, *minor*, *major*. |
| **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç bump –¥–ª—è dev-–≤–µ—Ä—Å–∏–π?** | –ï—Å–ª–∏ –≤–µ—Ä—Å–∏—è —Å–æ–¥–µ—Ä–∂–∏—Ç `.devN` ‚Äî —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è `N`; –µ—Å–ª–∏ `.dev` –Ω–µ—Ç ‚Äî –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è `.dev1`. |

---
## 11. –õ–∏—Ü–µ–Ω–∑–∏—è
MIT ¬© 2025 